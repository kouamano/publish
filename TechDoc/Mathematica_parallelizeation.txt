[Mathematicaの並列化処理]

#基礎知識
##ハードウエア
###CPU(Intel)
- 計算コア
- キャッシュメモリ
- hyperthreading: キャッシュを共有する。完全なマルチプルインストラクション。
  計算コアは論理CPUコアとして認識可能、この場合キャッシュを共有する一組のCPUペアがとして見える。
- QPI:CPUダイ(ソケット)間通信パス。
- ソケット:QPIでソケットペアが構成されれる=>NUMAも構成される。
- メインメモリーコントローラー:ソケット間をつなぐ=>NUMAが構成される理由。
###NUMA:不均一メモリーアクセス機構
ユーザーからはSMPと同じように見える。ただし、NUMA専用コマンドが用意される
- numastat
- numactl

#Mathematicaの並列処理
##SMP/NUMAマルチスレッド
下例、In[2]ではマルチスレッドが施される。
もし、スレッド数が1ソケットあたりのCPUコア数を超えたら、QPIの通信が発生し、処理は大きく遅延する。

 OMP_NUM_THREADS=16;math
 In[1]:= t=Table[Random[],{4000},{4000}];                                       
 In[2]:= PrincipalComponents[t]; 



